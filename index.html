<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AFMAP - المؤسسة الجزائرية للنباتات الطبية</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --primary: #2e7d32;
            --secondary: #81c784;
            --accent: #ffb74d;
            --dark: #1b5e20;
            --bg: #f8fcf8;
            --sidebar-width: 280px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Cairo', sans-serif; outline: none; }
        body { background-color: var(--bg); overflow-x: hidden; scroll-behavior: smooth; }
        
        /* --- Animations --- */
        .fade-in { animation: fadeIn 0.8s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* --- Header --- */
        header {
            background: rgba(255,255,255,0.95); padding: 10px 20px; position: sticky; top: 0; z-index: 1000;
            display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        .logo-container img { height: 50px; }
        .menu-btn { font-size: 1.5rem; color: var(--primary); cursor: pointer; border: none; background: none; }

        /* --- Sidebar --- */
        .sidebar-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 1001; display: none; }
        .side-menu {
            position: fixed; top: 0; right: -300px; width: var(--sidebar-width); height: 100%;
            background: white; z-index: 1002; transition: 0.3s; padding: 20px;
            display: flex; flex-direction: column; box-shadow: -5px 0 15px rgba(0,0,0,0.1);
        }
        .side-menu.active { right: 0; }
        .close-menu { align-self: flex-end; font-size: 1.5rem; cursor: pointer; margin-bottom: 20px; }
        .side-link {
            padding: 15px; border-bottom: 1px solid #eee; text-decoration: none;
            color: #333; font-weight: bold; display: flex; align-items: center; gap: 10px; transition: 0.3s;
        }
        .side-link:hover { background: var(--bg); color: var(--primary); padding-right: 20px; }
        .admin-login-link { margin-top: auto; background: var(--dark); color: white; border-radius: 8px; justify-content: center; }

        /* --- Hero Section --- */
        .hero {
            height: 80vh; position: relative; display: flex; align-items: center; justify-content: center;
            text-align: center; color: white; background-size: cover; background-position: center;
            transition: background-image 1s ease-in-out; /* Smooth transition for slider */
        }
        .hero::before { content: ''; position: absolute; inset: 0; background: rgba(0,0,0,0.5); }
        .hero-content { position: relative; z-index: 2; padding: 20px; width: 100%; }
        .hero h1 { font-size: 2.5rem; margin-bottom: 15px; text-shadow: 0 2px 10px rgba(0,0,0,0.5); }
        
        .event-wrapper { margin-bottom: 20px; display: inline-flex; flex-wrap: wrap; justify-content: center; align-items: center; gap: 10px; }
        .event-badge { background: var(--accent); color: #000; padding: 8px 20px; border-radius: 50px; font-weight: bold; font-size: 0.9rem; }
        .event-btn { background: white; color: var(--primary); padding: 8px 20px; border-radius: 50px; text-decoration: none; font-weight: bold; font-size: 0.9rem; transition: 0.3s; }
        .event-btn:hover { background: var(--primary); color: white; }

        /* --- Stats Bar --- */
        .stats-bar { 
            background: var(--primary); padding: 30px 5%; color: white; 
            display: flex; flex-wrap: wrap; justify-content: space-around; text-align: center; gap: 20px;
        }
        .stat-item i { font-size: 2rem; margin-bottom: 10px; color: var(--accent); }
        .stat-num { font-size: 1.8rem; font-weight: bold; display: block; }
        .stat-text { font-size: 1rem; opacity: 0.9; }

        /* --- General Layout --- */
        .section-container { padding: 50px 5%; }
        .section-title { text-align: center; margin-bottom: 40px; color: var(--dark); font-size: 2rem; position: relative; }
        .section-title::after { content: ''; display: block; width: 60px; height: 3px; background: var(--primary); margin: 10px auto; }
        
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        
        /* --- Founders Specific Layout (2 per row) --- */
        .founders-grid { 
            display: grid; 
            grid-template-columns: repeat(2, 1fr); /* Force 2 columns */
            gap: 20px; 
        }
        @media (max-width: 400px) {
            .founders-grid { grid-template-columns: 1fr; } /* On very small screens 1 column */
        }

        /* --- Cards --- */
        .card { background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.05); transition: 0.3s; }
        .card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .card-img { width: 100%; height: 180px; object-fit: cover; }
        .card-body { padding: 15px; }
        .card h3 { color: var(--primary); font-size: 1.1rem; margin-bottom: 5px; }
        .card-meta { margin-top: 10px; padding-top: 10px; border-top: 1px solid #eee; font-size: 0.85rem; color: #555; }
        .card-meta div { margin-top: 5px; display: flex; align-items: center; gap: 5px; }

        /* --- Footer --- */
        footer { background: #222; color: #ccc; padding: 40px 20px; text-align: center; margin-top: 50px; }

        /* --- Admin & Modals --- */
        .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 2000; display: none; justify-content: center; align-items: center; padding: 20px; }
        .modal-content { background: white; padding: 25px; border-radius: 10px; width: 100%; max-width: 600px; max-height: 90vh; overflow-y: auto; position: relative; }
        .dashboard-modal { max-width: 95%; height: 95vh; }
        
        .tab-btn { padding: 8px 15px; border: 1px solid #ddd; background: #eee; cursor: pointer; margin-right: 5px; border-radius: 4px; }
        .tab-btn.active { background: var(--primary); color: white; border-color: var(--primary); }
        .form-group { margin-bottom: 15px; border-bottom: 1px solid #f0f0f0; padding-bottom: 10px; }
        .form-group label { display: block; font-weight: bold; margin-bottom: 5px; }
        .form-group input, .form-group textarea, .form-group select { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; }
        
        .btn { padding: 8px 15px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; color: white; }
        .btn-primary { background: var(--primary); }
        .btn-danger { background: #d32f2f; }
        .btn-secondary { background: #555; }

        .image-list-item { display: flex; justify-content: space-between; background: #eee; padding: 5px; margin-bottom: 5px; border-radius: 4px; align-items: center; }
        .image-list-item img { height: 40px; width: 40px; object-fit: cover; border-radius: 4px; }
    </style>
</head>
<body>

    <!-- Header -->
    <header>
        <div class="logo-container" id="logo-display">
             <h2 style="color: var(--primary);">AFMAP</h2>
        </div>
        <button class="menu-btn" onclick="toggleMenu()"><i class="fas fa-bars"></i></button>
    </header>

    <!-- Side Menu -->
    <div class="sidebar-overlay" onclick="toggleMenu()" id="overlay"></div>
    <div class="side-menu" id="side-menu">
        <div class="close-menu" onclick="toggleMenu()">&times;</div>
        <a href="#hero" class="side-link" onclick="toggleMenu()"><i class="fas fa-home"></i> الرئيسية</a>
        <a href="#services" class="side-link" onclick="toggleMenu()"><i class="fas fa-hand-holding-heart"></i> الخدمات</a>
        <a href="#products" class="side-link" onclick="toggleMenu()"><i class="fas fa-leaf"></i> المنتجات</a>
        <a href="#founders" class="side-link" onclick="toggleMenu()"><i class="fas fa-users"></i> المؤسسين</a>
        <a href="#contact" class="side-link" onclick="toggleMenu()"><i class="fas fa-envelope"></i> اتصل بنا</a>
        <a href="#" class="side-link admin-login-link" onclick="openLoginModal()"><i class="fas fa-user-shield"></i> لوحة الإدارة</a>
    </div>

    <!-- Hero -->
    <section class="hero" id="hero">
        <div class="hero-content fade-in">
            <div class="event-wrapper">
                <div class="event-badge" id="hero-event-text">Next Event Loading...</div>
                <a href="#" class="event-btn" id="hero-event-btn" style="display: none;">التسجيل الآن</a>
            </div>
            <h1 id="hero-title">AFMAP</h1>
            <p id="hero-desc" style="font-size: 1.2rem;">الطبيعة بين أيدينا</p>
        </div>
    </section>

    <!-- Stats -->
    <div class="stats-bar" id="stats-display">
        <!-- Injected via JS -->
    </div>

    <!-- About -->
    <section class="section-container" id="about">
        <h2 class="section-title">من نحن</h2>
        <div style="text-align: center; max-width: 800px; margin: 0 auto; line-height: 1.8; color: #555;">
            <p>المؤسسة الجزائرية للنباتات الطبية والعطرية هي منارة علمية تهدف لحماية وتثمين التنوع البيولوجي في الجزائر.</p>
        </div>
    </section>

    <!-- Services -->
    <section class="section-container" style="background: white;" id="services">
        <h2 class="section-title">خدماتنا</h2>
        <div class="grid" id="services-grid"></div>
    </section>

    <!-- Founders (2 per row) -->
    <section class="section-container" id="founders">
        <h2 class="section-title">المؤسسين</h2>
        <div class="founders-grid" id="founders-grid"></div>
    </section>

    <!-- Products -->
    <section class="section-container" style="background: white;" id="products">
        <h2 class="section-title">منتجاتنا</h2>
        <div class="grid" id="products-grid"></div>
    </section>

    <!-- Contact -->
    <section class="section-container" style="background: #2e7d32; color: white;" id="contact">
        <h2 class="section-title" style="color: white; border-color: white;">اتصل بنا</h2>
        <div style="text-align: center;">
            <p><i class="fas fa-phone"></i> <span id="contact-phone">0540043640</span></p>
            <p><i class="fas fa-envelope"></i> <span id="contact-email">info@afmap-dz.com</span></p>
            <p><i class="fas fa-map-marker-alt"></i> الجزائر، العاصمة</p>
        </div>
    </section>

    <footer>
        <p>جميع الحقوق محفوظة &copy; 2026 AFMAP</p>
    </footer>

    <!-- ================== MODALS ================== -->

    <!-- Login Modal -->
    <div class="modal" id="login-modal">
        <div class="modal-content" style="max-width: 350px; text-align: center;">
            <h3 style="margin-bottom: 15px;">تسجيل الدخول</h3>
            <div class="form-group"><input type="text" id="admin-user" placeholder="اسم المستخدم"></div>
            <div class="form-group"><input type="password" id="admin-pass" placeholder="كلمة المرور"></div>
            <button class="btn btn-primary" style="width:100%" onclick="checkLogin()">دخول</button>
            <button class="btn btn-secondary" style="width:100%; margin-top:5px;" onclick="closeLogin()">إلغاء</button>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div class="modal" id="admin-dashboard">
        <div class="modal-content dashboard-modal">
            <div style="display:flex; justify-content:space-between; margin-bottom:20px; border-bottom:2px solid #eee; padding-bottom:10px;">
                <h2>لوحة التحكم</h2>
                <button class="btn btn-danger" onclick="logout()">خروج</button>
            </div>

            <!-- Tabs -->
            <div style="display: flex; gap: 5px; flex-wrap: wrap; margin-bottom: 15px;">
                <button class="tab-btn active" onclick="showTab('hero')">الواجهة & الصور</button>
                <button class="tab-btn" onclick="showTab('stats')">الإحصائيات</button>
                <button class="tab-btn" onclick="showTab('founders')">المؤسسين</button>
                <button class="tab-btn" onclick="showTab('services')">الخدمات</button>
                <button class="tab-btn" onclick="showTab('products')">المنتجات</button>
            </div>

            <div id="admin-content-area" style="padding-bottom: 20px;"></div>
            
            <button class="btn btn-secondary" onclick="document.getElementById('admin-dashboard').style.display='none'">إغلاق اللوحة</button>
        </div>
    </div>

    <script>
        // --- DATA STRUCTURE ---
        const defaultData = {
            settings: {
                logo: null,
                heroImages: [
                    "https://images.unsplash.com/photo-1501004318641-b39e6451bec6?w=1350",
                    "https://images.unsplash.com/photo-1466692476868-aef1dfb1e735?w=1350",
                    "https://images.unsplash.com/photo-1471943311424-64942b855297?w=1350"
                ],
                heroTitle: "AFMAP",
                heroDesc: "الطبيعة بين أيدينا",
                eventText: "Event: 17 Feb 2026",
                eventLink: "#",
                eventLinkText: "سجل الآن",
                contactPhone: "0540043640",
                contactEmail: "info@afmap-dz.com"
            },
            stats: [
                { id: 1, text: "+700 نبات", icon: "fa-leaf" },
                { id: 2, text: "+160 باحث", icon: "fa-user-graduate" },
                { id: 3, text: "+50 دراسة", icon: "fa-flask" }
            ],
            services: [],
            products: [],
            founders: [
                { name: "أحمد بن محمد", role: "المدير العام", desc: "خبير في الأعشاب الطبية", contact: "ahmed@email.com", img: "https://randomuser.me/api/portraits/men/32.jpg" },
                { name: "د. سارة علي", role: "رئيسة الأبحاث", desc: "دكتوراه في البيولوجيا", contact: "sara@email.com", img: "https://randomuser.me/api/portraits/women/44.jpg" }
            ]
        };

        let db = JSON.parse(localStorage.getItem('afmap_v3')) || defaultData;
        let sliderInterval;

        // --- CORE FUNCTIONS ---
        function saveDB() {
            try {
                localStorage.setItem('afmap_v3', JSON.stringify(db));
            } catch (e) {
                alert("ذاكرة المتصفح ممتلئة، يرجى استخدام صور أصغر.");
            }
        }

        function toggleMenu() {
            const menu = document.getElementById('side-menu');
            const overlay = document.getElementById('overlay');
            if (menu.classList.contains('active')) {
                menu.classList.remove('active');
                overlay.style.display = 'none';
            } else {
                menu.classList.add('active');
                overlay.style.display = 'block';
            }
        }

        // --- HERO SLIDER ---
        function initSlider() {
            if (sliderInterval) clearInterval(sliderInterval);
            let currentSlide = 0;
            const heroEl = document.getElementById('hero');
            const images = db.settings.heroImages;

            if (images.length > 0) {
                heroEl.style.backgroundImage = `url('${images[0]}')`;
                if (images.length > 1) {
                    sliderInterval = setInterval(() => {
                        currentSlide = (currentSlide + 1) % images.length;
                        heroEl.style.backgroundImage = `url('${images[currentSlide]}')`;
                    }, 3000); // Change every 3 seconds
                }
            }
        }

        // --- RENDERING ---
        function renderSite() {
            // Header & Hero Text
            if (db.settings.logo) document.getElementById('logo-display').innerHTML = `<img src="${db.settings.logo}" alt="Logo">`;
            document.getElementById('hero-title').innerText = db.settings.heroTitle;
            document.getElementById('hero-desc').innerText = db.settings.heroDesc;
            document.getElementById('hero-event-text').innerText = db.settings.eventText;
            
            // Hero Event Button
            const btn = document.getElementById('hero-event-btn');
            if (db.settings.eventLink && db.settings.eventLink.length > 1) {
                btn.style.display = 'inline-block';
                btn.href = db.settings.eventLink;
                btn.innerText = db.settings.eventLinkText || "اضغط هنا";
            } else {
                btn.style.display = 'none';
            }

            // Slider
            initSlider();

            // Stats
            const statsContainer = document.getElementById('stats-display');
            statsContainer.innerHTML = '';
            db.stats.forEach(s => {
                statsContainer.innerHTML += `
                    <div class="stat-item fade-in">
                        <i class="fas ${s.icon}"></i>
                        <span class="stat-num">${s.text.split(' ')[0]}</span>
                        <span class="stat-text">${s.text.split(' ').slice(1).join(' ')}</span>
                    </div>
                `;
            });

            // Contact
            document.getElementById('contact-phone').innerText = db.settings.contactPhone;
            document.getElementById('contact-email').innerText = db.settings.contactEmail;

            // Grids
            renderGrid('services', db.services);
            renderGrid('products', db.products);
            renderFounders();
        }

        function renderGrid(type, data) {
            const container = document.getElementById(`${type}-grid`);
            container.innerHTML = '';
            data.forEach(item => {
                let metaHTML = '';
                if(item.link || item.info) {
                    metaHTML = `<div class="card-meta">
                        ${item.link ? `<a href="${item.link}" target="_blank" style="text-decoration:none; color:var(--primary);"><i class="fas fa-link"></i> رابط</a>` : ''}
                        ${item.info ? `<span onclick="alert('${item.info}')" style="cursor:pointer; margin-right:10px;"><i class="fas fa-info-circle"></i> معلومات</span>` : ''}
                    </div>`;
                }

                container.innerHTML += `
                    <div class="card fade-in">
                        <img src="${item.img || 'https://via.placeholder.com/300'}" class="card-img">
                        <div class="card-body">
                            <h3>${item.title}</h3>
                            <p style="font-size:0.9rem; color:#666;">${item.desc}</p>
                            ${metaHTML}
                        </div>
                    </div>
                `;
            });
        }
        
        function renderFounders() {
            const container = document.getElementById('founders-grid');
            container.innerHTML = '';
            db.founders.forEach(f => {
                container.innerHTML += `
                    <div class="card fade-in" style="text-align:center;">
                        <img src="${f.img || 'https://via.placeholder.com/150'}" style="width:120px; height:120px; border-radius:50%; margin-top:20px; object-fit:cover; border:3px solid var(--primary);">
                        <div class="card-body">
                            <h3>${f.name}</h3>
                            <div style="color:var(--primary); font-weight:bold; margin-bottom:5px;">${f.role}</div>
                            <p style="font-size:0.85rem; color:#666; margin-bottom:10px;">${f.desc || ''}</p>
                            ${f.contact ? `<div style="font-size:0.8rem; background:#f0f0f0; padding:5px; border-radius:5px;"><i class="fas fa-envelope"></i> ${f.contact}</div>` : ''}
                        </div>
                    </div>
                `;
            });
        }

        // --- ADMIN AUTH ---
        function openLoginModal() { 
            toggleMenu(); 
            document.getElementById('login-modal').style.display = 'flex'; 
        }
        function closeLogin() { document.getElementById('login-modal').style.display = 'none'; }
        
        function checkLogin() {
            if(document.getElementById('admin-user').value === 'admin' && 
               document.getElementById('admin-pass').value === 'abobob123') {
                closeLogin();
                openDashboard();
            } else { alert('بيانات خاطئة'); }
        }

        function logout() {
            document.getElementById('admin-dashboard').style.display = 'none';
        }

        // --- ADMIN DASHBOARD LOGIC ---
        function openDashboard() {
            document.getElementById('admin-dashboard').style.display = 'flex';
            showTab('hero');
        }

        function showTab(tabName) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');

            const area = document.getElementById('admin-content-area');
            area.innerHTML = ''; 

            if(tabName === 'hero') {
                // Images List
                let imagesHtml = '';
                db.settings.heroImages.forEach((img, idx) => {
                    imagesHtml += `<div class="image-list-item"><img src="${img}"> <button class="btn btn-danger" style="font-size:0.8rem;" onclick="deleteHeroImage(${idx})">X</button></div>`;
                });

                area.innerHTML = `
                    <h3>إعدادات الواجهة</h3>
                    <div class="form-group"><label>تغيير اللوجو</label><input type="file" accept="image/*" onchange="uploadImage(this, (url)=>{ db.settings.logo = url; saveDB(); renderSite(); })"></div>
                    <div class="form-group">
                        <label>صور الخلفية (تتغير كل 3 ثواني)</label>
                        <div id="hero-img-list">${imagesHtml}</div>
                        <input type="file" accept="image/*" style="margin-top:5px;" onchange="uploadImage(this, (url)=>{ db.settings.heroImages.push(url); saveDB(); renderSite(); showTab('hero'); })">
                    </div>
                    <div class="form-group"><label>العنوان الرئيسي</label><input type="text" value="${db.settings.heroTitle}" onchange="db.settings.heroTitle=this.value; saveDB(); renderSite();"></div>
                    <div class="form-group"><label>وصف مختصر</label><input type="text" value="${db.settings.heroDesc}" onchange="db.settings.heroDesc=this.value; saveDB(); renderSite();"></div>
                    <div class="form-group"><label>نص الحدث (Next Event)</label><input type="text" value="${db.settings.eventText}" onchange="db.settings.eventText=this.value; saveDB(); renderSite();"></div>
                    <div class="form-group"><label>رابط زر الحدث (اختياري)</label><input type="text" placeholder="http://..." value="${db.settings.eventLink}" onchange="db.settings.eventLink=this.value; saveDB(); renderSite();"></div>
                    <div class="form-group"><label>نص زر الحدث</label><input type="text" placeholder="مثال: سجل الآن" value="${db.settings.eventLinkText}" onchange="db.settings.eventLinkText=this.value; saveDB(); renderSite();"></div>
                `;
            }
            else if (tabName === 'stats') {
                area.innerHTML = `<h3>إعدادات الإحصائيات</h3>`;
                db.stats.forEach((stat, idx) => {
                    area.innerHTML += `
                        <div style="background:#f9f9f9; padding:10px; margin-bottom:10px; border-radius:5px;">
                            <label>إحصائية رقم ${idx+1}</label>
                            <input type="text" value="${stat.text}" onchange="db.stats[${idx}].text=this.value; saveDB(); renderSite();" placeholder="الرقم والنص">
                            <label style="margin-top:5px; font-size:0.8rem;">الأيقونة:</label>
                            <select onchange="db.stats[${idx}].icon=this.value; saveDB(); renderSite();" style="width:100%; padding:5px;">
                                <option value="fa-leaf" ${stat.icon==='fa-leaf'?'selected':''}>نبات (Leaf)</option>
                                <option value="fa-user-graduate" ${stat.icon==='fa-user-graduate'?'selected':''}>باحث (Scholar)</option>
                                <option value="fa-flask" ${stat.icon==='fa-flask'?'selected':''}>دراسة/مختبر (Flask)</option>
                                <option value="fa-chart-line" ${stat.icon==='fa-chart-line'?'selected':''}>بيانات (Chart)</option>
                                <option value="fa-globe" ${stat.icon==='fa-globe'?'selected':''}>عالمي (Globe)</option>
                            </select>
                        </div>
                    `;
                });
            }
            else if (tabName === 'founders') {
                renderAdminFounders(area);
            }
            else {
                // Products / Services
                renderAdminList(tabName, area);
            }
        }

        // --- ADMIN: FOUNDERS SPECIFIC ---
        function renderAdminFounders(container) {
            container.innerHTML = `<h3>إدارة المؤسسين</h3>
            <div style="background:#f0f0f0; padding:15px; border-radius:8px; margin-bottom:20px;">
                <h4>إضافة مؤسس</h4>
                <div class="form-group"><input type="text" id="nf-name" placeholder="الاسم الكامل"></div>
                <div class="form-group"><input type="text" id="nf-role" placeholder="المهنة / الدور"></div>
                <div class="form-group"><textarea id="nf-desc" placeholder="وصف قصير ومهام"></textarea></div>
                <div class="form-group"><input type="text" id="nf-contact" placeholder="معلومات اتصال (ايميل/هاتف)"></div>
                <div class="form-group"><label>صورة</label><input type="file" id="nf-img" accept="image/*"></div>
                <button class="btn btn-primary" onclick="addFounder()">إضافة</button>
            </div>`;

            db.founders.forEach((f, idx) => {
                container.innerHTML += `<div style="display:flex; justify-content:space-between; align-items:center; background:white; padding:10px; border-bottom:1px solid #ddd;">
                    <span>${f.name} - ${f.role}</span>
                    <button class="btn btn-danger" onclick="deleteFounder(${idx})">حذف</button>
                </div>`;
            });
        }

        function addFounder() {
            const name = document.getElementById('nf-name').value;
            const role = document.getElementById('nf-role').value;
            const desc = document.getElementById('nf-desc').value;
            const contact = document.getElementById('nf-contact').value;
            const fileInput = document.getElementById('nf-img');

            if(!name) return alert("الاسم مطلوب");

            const save = (url) => {
                db.founders.push({ name, role, desc, contact, img: url });
                saveDB(); renderSite(); showTab('founders');
            };

            if(fileInput.files[0]) uploadImage(fileInput, save);
            else save('');
        }

        function deleteFounder(idx) {
            if(confirm('حذف؟')) { db.founders.splice(idx,1); saveDB(); renderSite(); showTab('founders'); }
        }

        // --- ADMIN: GENERIC LIST ---
        function renderAdminList(type, container) {
            container.innerHTML = `<h3>إدارة ${type === 'services' ? 'الخدمات' : 'المنتجات'}</h3>
            <div style="background:#f0f0f0; padding:15px; border-radius:8px; margin-bottom:20px;">
                <div class="form-group"><input type="text" id="ni-title" placeholder="العنوان"></div>
                <div class="form-group"><input type="text" id="ni-desc" placeholder="الوصف"></div>
                <div class="form-group"><input type="text" id="ni-link" placeholder="رابط خارجي (اختياري)"></div>
                <div class="form-group"><input type="text" id="ni-info" placeholder="معلومات إضافية (هاتف/ايميل)"></div>
                <div class="form-group"><label>صورة</label><input type="file" id="ni-img" accept="image/*"></div>
                <button class="btn btn-primary" onclick="addGenericItem('${type}')">إضافة</button>
            </div>`;

            db[type].forEach((item, idx) => {
                container.innerHTML += `<div style="display:flex; justify-content:space-between; background:white; padding:10px; border-bottom:1px solid #ddd;">
                    <span>${item.title}</span>
                    <button class="btn btn-danger" onclick="deleteGenericItem('${type}', ${idx})">حذف</button>
                </div>`;
            });
        }

        function addGenericItem(type) {
            const title = document.getElementById('ni-title').value;
            const desc = document.getElementById('ni-desc').value;
            const link = document.getElementById('ni-link').value;
            const info = document.getElementById('ni-info').value;
            const fileInput = document.getElementById('ni-img');

            if(!title) return alert("العنوان مطلوب");

            const save = (url) => {
                db[type].push({ title, desc, link, info, img: url });
                saveDB(); renderSite(); showTab(type);
            };

            if(fileInput.files[0]) uploadImage(fileInput, save);
            else save('');
        }

        function deleteGenericItem(type, idx) {
            if(confirm('حذف؟')) { db[type].splice(idx,1); saveDB(); renderSite(); showTab(type); }
        }

        function deleteHeroImage(idx) {
            if(confirm('حذف الصورة؟')) {
                db.settings.heroImages.splice(idx, 1);
                saveDB(); renderSite(); showTab('hero');
            }
        }

        // --- UTILS ---
        function uploadImage(input, callback) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function(e) { callback(e.target.result); }
                reader.readAsDataURL(input.files[0]);
            }
        }

        // --- INIT ---
        window.onload = renderSite;

    </script>
</body>
</html>
